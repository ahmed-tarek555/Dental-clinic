<!DOCTYPE html>
<html>
<head>
  <title>Forgot Password</title>
</head>
<body>
  <h2>Forgot Password</h2>

  <form id="forgotForm" onsubmit="send_reset(event)">
    <label>Email:</label>
    <input type="email" name="email" required>

    <button type="submit">Send Code</button>
    <p id="response"></p>
    <a id="reset_link" href="/reset-password-page"></a>
  </form>
  <script>
    async function send_reset(e) {
      e.preventDefault();

      const form = new FormData(document.getElementById("forgotForm"));

      const res = await fetch("/forgot-password", {
        method: "POST",
        body: form
      });

      if (!res.ok) {
        const error = await res.json();
        document.getElementById("response").innerText = error.detail;
        return;
      }

      const result = await res.json()
      document.getElementById("response").innerText = result.message;
      document.getElementById("reset_link").innerText =
        "Go to reset page";
    }

  </script>
</body>
</html>
